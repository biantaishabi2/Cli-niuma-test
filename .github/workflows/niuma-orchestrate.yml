name: niuma - Orchestrate

on:
  issues:
    types: [labeled]
  pull_request:
    types: [closed]
  repository_dispatch:
    types: [niuma.task.completed]

permissions:
  issues: write
  contents: read

jobs:
  orchestrate:
    uses: biantaishabi2/Cli/.github/workflows/niuma-orchestrate-reusable.yml@master
    secrets: inherit
    with:
      repo: ${{ github.repository }}
      store_dir: /home/wangbo/.niuma/stores/Cli-niuma-test
      workflow_source_repo: biantaishabi2/Cli
      workflow_source_ref: master
      repo_dir: "."
      event_id: ${{ github.event.client_payload.event_id || '' }}
      dedup_window_hours: 24
      concurrency_key: "niuma-orchestrate-${repo}"
      enable_local_cleanup: true
